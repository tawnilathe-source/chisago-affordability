<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chisago Lakes Home Affordability</title>
<style>
  :root{
    --blue:#486fb7;        /* buttons & sliders */
    --text:#333a56;        /* text on white */
    --white:#ffffff;
    --muted:#f3f4f6;
    --border:#e5e7eb;
  }
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
       background:var(--white);color:var(--text);}
  .wrap{max-width:1100px;margin:auto;padding:24px;}
  h1{margin:0 0 8px;font-size:28px}
  .grid{display:grid;gap:16px}
  @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--white);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
  .label{font-size:14px;font-weight:600;margin-bottom:6px}
  .row{margin-bottom:12px}
  .range{width:100%}
  input[type="range"]{accent-color:var(--blue)}
  input[type="number"], select{
    width:100%;padding:10px;border:1px solid var(--border);border-radius:12px;color:var(--text);
  }
  .minmax{display:flex;justify-content:space-between;font-size:11px;opacity:.8}
  .pill{display:inline-block;border:1px solid var(--border);padding:6px 10px;border-radius:999px;
        font-size:13px;margin-right:8px;cursor:pointer;background:var(--white);color:var(--text)}
  .pill.active{background:var(--blue);color:#fff;border-color:var(--blue)}
  .kv{display:flex;justify-content:space-between;background:var(--muted);padding:8px 12px;border-radius:10px;font-size:14px;margin-bottom:6px}
  .cta{width:100%;background:var(--blue);color:#fff;border:none;border-radius:12px;padding:12px;
       font-weight:600;cursor:pointer}
  .hint{font-size:11px;opacity:.8}
  .big{font-size:34px;font-weight:800}
</style>
</head>
<body>
  <div class="wrap">
    <h1>How much house can I afford in Chisago Lakes, MN?</h1>
    <p class="hint">Move the sliders—your estimate updates instantly. Taxes, insurance, and PMI are included when applicable.</p>

    <div class="grid">
      <!-- Controls -->
      <div class="card">
        <div class="row">
          <div class="label">Household income (before tax)</div>
          <input id="income" type="range" min="20000" max="300000" step="1000" value="100000" class="range">
          <div class="minmax"><span id="incomeVal"></span><span>$300,000</span></div>
        </div>

        <div class="row">
          <div class="label">Other monthly debts</div>
          <input id="debts" type="range" min="0" max="3000" step="25" value="300" class="range">
          <div class="minmax"><span>$0</span><span id="debtsVal"></span></div>
          <div class="hint">Car loans, student loans, credit card minimums.</div>
        </div>

        <div class="row">
          <div class="label">Loan term</div>
          <div>
            <button class="pill active" data-term="30">30 yrs</button>
            <button class="pill" data-term="15">15 yrs</button>
          </div>
        </div>

        <div class="row">
          <div class="label">Interest rate (APR)</div>
          <input id="rate" type="range" min="2" max="12" step="0.05" value="6.75" class="range">
          <div class="minmax"><span>2.00%</span><span id="rateVal"></span></div>
        </div>

        <div class="row">
          <div class="label">Down payment (%)</div>
          <input id="down" type="range" min="0" max="30" step="0.5" value="5" class="range">
          <div class="minmax"><span>0%</span><span id="downVal"></span></div>
          <div class="hint">Default 5% (adjust if you plan to put more down).</div>
        </div>

        <div class="row">
          <div class="label">Property tax (% of price / yr)</div>
          <input id="tax" type="range" min="0.5" max="2.0" step="0.05" value="1.05" class="range">
          <div class="minmax"><span>0.5%</span><span id="taxVal"></span></div>
        </div>

        <div class="row">
          <div class="label">Homeowners insurance (% of price / yr)</div>
          <input id="ins" type="range" min="0.2" max="1.2" step="0.05" value="0.70" class="range">
          <div class="minmax"><span>0.2%</span><span id="insVal"></span></div>
        </div>

        <div class="row">
          <div class="label">PMI (% of loan / yr if &lt; 20% down)</div>
          <input id="pmi" type="range" min="0.4" max="1.8" step="0.05" value="0.80" class="range">
          <div class="minmax"><span>0.4%</span><span id="pmiVal"></span></div>
        </div>

        <div class="row">
          <div class="label">HOA (monthly)</div>
          <input id="hoa" type="range" min="0" max="600" step="10" value="0" class="range">
          <div class="minmax"><span>$0</span><span id="hoaVal"></span></div>
        </div>

        <button class="cta" id="leadBtn">Get a custom approval &amp; local listings</button>
        <p class="hint">Educational estimate only. Actual approvals vary by credit, program, reserves, and property.</p>
      </div>

      <!-- Results -->
      <div class="card">
        <div class="label">Estimated maximum home price</div>
        <div id="price" class="big">$0</div>
        <div class="hint" id="downLoan">Estimated down / loan</div>

        <div style="margin-top:10px"></div>
        <div class="kv"><span>Principal &amp; interest</span><span id="pi">$0</span></div>
        <div class="kv"><span>Property taxes</span><span id="taxOut">$0</span></div>
        <div class="kv"><span>Homeowners insurance</span><span id="insOut">$0</span></div>
        <div class="kv"><span>PMI</span><span id="pmiOut">$0</span></div>
        <div class="kv"><span>HOA</span><span id="hoaOut">$0</span></div>
        <div class="kv" style="font-weight:700"><span>Total PITI + HOA</span><span id="total">$0</span></div>
        <p class="hint" id="status"></p>
      </div>
    </div>
  </div>

<script>
  // --- Helpers
  const fmt0 = n => n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});
  const fmt = n => n.toLocaleString(undefined,{style:'currency',currency:'USD'});
  const pct = n => n.toFixed(2) + '%';
  const monthlyRate = apr => apr/100/12;
  const pmt = (r,n,pv) => r===0 ? pv/n : (pv*r)/(1-Math.pow(1+r,-n));

  // --- Elements
  const el = id => document.getElementById(id);
  const inputs = ['income','debts','rate','down','tax','ins','pmi','hoa'].map(el);
  const termButtons = Array.from(document.querySelectorAll('.pill'));
  let term = 30; // years
  const frontDTI = 28, backDTI = 36;

  function recalc(){
    // read values
    const income = +el('income').value;
    const debts  = +el('debts').value;
    const rate   = +el('rate').value;
    const downPct= +el('down').value;
    const taxPct = +el('tax').value;
    const insPct = +el('ins').value;
    const pmiPct = +el('pmi').value;
    const hoa    = +el('hoa').value;

    // UI mirrors
    el('incomeVal').textContent = fmt0(income);
    el('debtsVal').textContent  = fmt0(debts);
    el('rateVal').textContent   = pct(rate);
    el('downVal').textContent   = downPct.toFixed(1) + '%';
    el('taxVal').textContent    = taxPct.toFixed(2) + '%';
    el('insVal').textContent    = insPct.toFixed(2) + '%';
    el('pmiVal').textContent    = pmiPct.toFixed(2) + '%';
    el('hoaVal').textContent    = fmt0(hoa);

    const months = term*12;
    const mr = monthlyRate(rate);

    const grossMonthly = income/12;
    const maxHousingFront = grossMonthly*(frontDTI/100);
    const maxHousingBack  = Math.max(0, grossMonthly*(backDTI/100) - debts);
    const cap = Math.min(maxHousingFront, maxHousingBack);

    function compute(price){
      const down = price*(downPct/100);
      const loan = Math.max(0, price - down);
      const pi   = pmt(mr, months, loan);
      const tax  = (price*(taxPct/100))/12;
      const ins  = (price*(insPct/100))/12;
      const pmi  = downPct < 20 ? (loan*(pmiPct/100))/12 : 0;
      const piti = pi + tax + ins + pmi;
      const total= piti + hoa;
      return {down, loan, pi, tax, ins, pmi, total};
    }

    // binary search max price so total <= cap
    let lo=50000, hi=1500000, best=compute(50000);
    for(let i=0;i<48;i++){
      const mid=(lo+hi)/2;
      const c=compute(mid);
      if(c.total>cap) hi=mid; else { lo=mid; best=c; }
    }
    const price = lo;
    const c = compute(price);

    // write outputs
    el('price').textContent   = fmt0(price);
    el('downLoan').textContent= `Estimated down: ${fmt0(c.down)} • Loan: ${fmt0(c.loan)}`;
    el('pi').textContent      = fmt0(c.pi);
    el('taxOut').textContent  = fmt0(c.tax);
    el('insOut').textContent  = fmt0(c.ins);
    el('pmiOut').textContent  = fmt0(c.pmi);
    el('hoaOut').textContent  = fmt0(hoa);
    el('total').textContent   = fmt0(c.total);

    const cushion = cap - c.total;
    el('status').textContent = cushion < -50
      ? "This looks a bit tight vs common guidelines. Consider lowering price, bigger down payment, or paying down other debts."
      : cushion > 400
        ? "You’re comfortably under the cap. Keep the cushion or explore slightly higher price points."
        : "This fits common guidelines. A lender can fine-tune approval based on credit and program.";
  }

  // events
  inputs.forEach(i=>i.addEventListener('input', recalc));
  termButtons.forEach(b=>{
    b.addEventListener('click', ()=>{
      termButtons.forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      term = +b.dataset.term;
      recalc();
    });
  });
  el('leadBtn').addEventListener('click', ()=>alert("Pop lead form here (hook to your CRM)."));

  // initial render
  recalc();
</script>
</body>
</html>
